{"_id":"roolz","_rev":"3-2e200a51008ef707fde65508e0525ccb","name":"roolz","description":"Create rules and do stuff","dist-tags":{"latest":"1.0.2"},"versions":{"0.0.1":{"name":"roolz","version":"0.0.1","description":"My kickass module","license":"MIT","repository":{"type":"git","url":"git+https://github.com/natecavanaugh/roolz.git"},"author":{"name":"Nate Cavanaugh","email":"nate@shift22.com","url":"alterform.com"},"engines":{"node":">=0.10.0"},"scripts":{"test":"gulp test-coverage","coveralls":"gulp coveralls"},"keywords":[],"dependencies":{"drip":"^1.4.0","getobject":"^0.1.0","lodash":"^3.10.1","string-sub":"0.0.1"},"devDependencies":{"mocha":"*","chai":"*","chai-string":"*","coveralls":"*","gulp-coveralls":"*","gulp-istanbul":"*","istanbul":"*","sinon":"*","gulp":"*","gulp-load-plugins":"*","gulp-help":"*","run-sequence":"*","gulp-mocha":"*"},"gitHead":"8cfd3da5a006805b26f722ced8c32f08a4c568fd","bugs":{"url":"https://github.com/natecavanaugh/roolz/issues"},"homepage":"https://github.com/natecavanaugh/roolz#readme","_id":"roolz@0.0.1","_shasum":"5b6c9f1d4e7f364ef5ceada0e1dd56f203c5bf05","_from":".","_npmVersion":"2.14.0","_nodeVersion":"0.12.7","_npmUser":{"name":"natecavanaugh","email":"nate@shift22.com"},"maintainers":[{"name":"natecavanaugh","email":"nate@shift22.com"}],"dist":{"shasum":"5b6c9f1d4e7f364ef5ceada0e1dd56f203c5bf05","tarball":"http://registry.npmjs.org/roolz/-/roolz-0.0.1.tgz"},"directories":{}},"1.0.0":{"name":"roolz","version":"1.0.0","description":"My kickass module","license":"MIT","repository":{"type":"git","url":"git+https://github.com/natecavanaugh/roolz.git"},"author":{"name":"Nate Cavanaugh","email":"nate@shift22.com","url":"alterform.com"},"engines":{"node":">=0.10.0"},"scripts":{"test":"gulp test-coverage","coveralls":"gulp coveralls"},"keywords":[],"dependencies":{"drip":"^1.4.0","getobject":"^0.1.0","lodash":"^3.10.1","string-sub":"0.0.1"},"devDependencies":{"mocha":"*","chai":"*","chai-string":"*","coveralls":"*","gulp-coveralls":"*","gulp-istanbul":"*","istanbul":"*","sinon":"*","gulp":"*","gulp-load-plugins":"*","gulp-help":"*","run-sequence":"*","gulp-mocha":"*"},"gitHead":"c40a84a78230c08f6369f192626579f6beb83f00","bugs":{"url":"https://github.com/natecavanaugh/roolz/issues"},"homepage":"https://github.com/natecavanaugh/roolz#readme","_id":"roolz@1.0.0","_shasum":"6499af93bb07dd18b4a776832c204bd68e01eea1","_from":".","_npmVersion":"2.14.0","_nodeVersion":"0.12.7","_npmUser":{"name":"natecavanaugh","email":"nate@shift22.com"},"maintainers":[{"name":"natecavanaugh","email":"nate@shift22.com"}],"dist":{"shasum":"6499af93bb07dd18b4a776832c204bd68e01eea1","tarball":"http://registry.npmjs.org/roolz/-/roolz-1.0.0.tgz"},"directories":{}},"1.0.2":{"name":"roolz","version":"1.0.2","description":"Create rules and do stuff","license":"MIT","repository":{"type":"git","url":"git+https://github.com/natecavanaugh/roolz.git"},"author":{"name":"Nate Cavanaugh","email":"nate@shift22.com","url":"alterform.com"},"engines":{"node":">=0.10.0"},"scripts":{"test":"gulp test-coverage","coveralls":"gulp coveralls"},"keywords":[],"dependencies":{"drip":"^1.4.0","lodash":"^3.10.1","string-sub":"0.0.1"},"devDependencies":{"mocha":"*","chai":"*","chai-string":"*","coveralls":"*","gulp-coveralls":"*","gulp-istanbul":"*","istanbul":"*","sinon":"*","gulp":"*","gulp-load-plugins":"*","gulp-help":"*","run-sequence":"*","gulp-mocha":"*"},"gitHead":"6bc31b1a17a010f0cb584dc01b04c6a096572c8e","bugs":{"url":"https://github.com/natecavanaugh/roolz/issues"},"homepage":"https://github.com/natecavanaugh/roolz#readme","_id":"roolz@1.0.2","_shasum":"f4649c0930366ec4b1b35d9c6c5afda1f1e918cf","_from":".","_npmVersion":"2.14.0","_nodeVersion":"0.12.7","_npmUser":{"name":"natecavanaugh","email":"nate@shift22.com"},"maintainers":[{"name":"natecavanaugh","email":"nate@shift22.com"}],"dist":{"shasum":"f4649c0930366ec4b1b35d9c6c5afda1f1e918cf","tarball":"http://registry.npmjs.org/roolz/-/roolz-1.0.2.tgz"},"directories":{}}},"readme":"# roolz\n[![NPM version][npm-image]][npm-url]\n[![build status][travis-image]][travis-url]\n[![Test coverage][coveralls-image]][coveralls-url]\n\n> Create rules and do stuff\n\n\n## Install\n\n```\n$ npm install --save roolz\n```\n\n\n## Usage\n\n```js\nvar roolz = require('roolz');\n\nvar ruleEngine = new roolz();\n\nruleEngine.on(\n\t'message',\n\tfunction(data) {\n\t\tconsole.log(data.message);\n\t\t// You can't have upper case letters\n\t\tconsole.log(data.context.content);\n\t\t// Hello World\n\t}\n);\n\nruleEngine.iterateRules(\n\t{\n\t\tnoUpperCaseLetters: {\n\t\t\tregex: /[A-Z]/,\n\t\t\tmessage: \"You can't have uppercase letters\",\n\t\t\treplacer: function(result, rule, context) {\n\t\t\t\treturn context.content.toLowerCase();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tfullItem: 'Hello World',\n\t\tcontent: 'Hello World'\n\t}\n);\n// hello world\n```\n\n\n\n## API\n\n### `roolz([rules])`\n\n#### rules\n\n*optional*\nType: `Object`\n\nThis is the rule object that contains the rules you wish to use.\nPassing this object is optional during instantiation, however, it allows you one slight convenience, which is that when you call `.invokeRules`, you can pass the key name of the rule group you wish to run on the context.\n\nThis is useful if you wish to set your rules once on the instance and not worry about them again (though you can still also pass additional rule groups to `.iterateRules` at a later time).\n\n### Methods\n\n#### `.iterateRules(rules, context)`\n\nThis is the workhorse of the engine, in which you give it a set of rules to run, and a context object.\nIt will loop over all of the rules defined in the rule group, and validate that the rule applies, and can sends out a message, as well as replace the content (if a `replacer` property is specified on any of the rules).\n\nReturns the `fullItem` property of the context after any transformations or replacements have been added to it.\n\n#### `.message`\nThis is a utilty method mainly for use when you define a `message` property on a rule object as a function.\nIn the function you could do something like:\n\n```js\n\tmessage: function(result, rule, context) {\n\t\treturn this.message('Line {0}: Bad input \"{1}\"', result, rule, context);\n\t}\n```\n\nIf `lineNum` is defined in your context, this will output something like:\n`Line 71: Bad input \"test\"`\n\nReturns the string after any defined placeholders are replaced.\n\n#### `.match`\nThis is a utilty method mainly for use when you define a `test` property on a rule object as a function.\nIn the function you could do something like:\n\n```js\n\ttest: function(content, regex, rule, context) {\n\t\treturn this.match(content, regex);\n\t}\n```\n\nReturns the result of running a `.match` on the content (null if nothing is found, or an array of results).\n\n#### `.test`\nThis is a utilty method mainly for use when you define a `test` property on a rule object as a function.\nIn the function you could do something like:\n\n```js\n\ttest: function(content, regex, rule, context) {\n\t\treturn this.test(content, regex);\n\t}\n```\n\nReturns a boolean.\n\n### Rule sets\n\nA rule set is simply a named collection of rule objects. You pass this into the constructor to allow a rule set to be iterated over by name with the `.iterateRules` method.\n\nThis would end up looking like:\n```js\nvar ruleEngine = new roolz(\n\t{\n\t\tmyRules: {\n\t\t\tcheckLines: {...},\n\t\t\tcheckWords: {...}\n\t\t}\n\t}\n);\n```\n\nThen, when you call: `ruleEngine.iterateRules('myRules', context)`, it will iterate over `checkLines` and `checkWords` that were defined.\n\nIf a rule set has a property called `IGNORE` on it, it's expected to be a regular expression which, if it passes, will not run any of the rules in the rule set.\n\n### Rule objects\nA rule object is simply an object with the following properties:\n`regex` (required) Regular Expression\n`message` (required) Can either be a string, a function, or a boolean of false if you don't wish to have any message output (this is really only useful if you're replacing something but don't want to output an error - for instance if you're logging out a message for it from something else).\nIf the message is defined as a string, then it can accept placeholders in the format of `{index}`, which if the supplied value is an array (by default it is), then the index is numeric, but if the value supplied is an object, then it would be the property index that's used.\nIf it's defined as a function, the `this` context is set to the roolz instance, and the arguments that are passed in are `result` (the result of either `test` or `match`, depending on how the rule is configured; see below), `rule` (the current rule object), and `context`, which is the object passed into `.iterateRules`.\n\nIf only those are passed, when `.iterateRules` is called, the `content` property of the context is tested with the regex to make sure it matches, and if it does, the message is emitted as a `message` event.\n\nThe other (optional) properties that have special meaning on the rule object are:\n`replacer` A string or a function. If passed as a string, it's the same kind of string that you would pass to `str.replace(/foo/, 'bar')`, meaning any groups specified in the regex can be referenced normally, and behaves exactly as if you had called the native `.replace` on a string.\nIf you pass a function, you need to return the string you wish to use as a replacement, but the function receives different arguments than what you would get if you passed a function to `.replace`.\nThe arguments are the same as `.message`, in that they are `result`, `rule`, and `context`.\n\n`test` A string or a function. If you pass a string, the only thing it recognizes is the word \"match\", which tells the engine to use the `.match` method on the string instead of the `.test` method. The impact of using `.match` is on the `result` argument passed to the other functions such as `replacer`. Instead of return a strict boolean of true or false, it returns what `str.match(/foo/)` would return, which is either an array of the matches, or null (if no match is found).\nIf a function is defined for `test`, then whatever value it returns will be passed as the result to the other functions.\nThe arguments it receives are `content` (the content to test), `regex` (the rule's regex), `rule` the current rule object, and `context`.\n\n`valid` A function. This property allows you to create a function that can dynamically determine if the rule should even test the content. It should return a boolean, and gets passed the arguments of `rule` and `context`.\n\n`testProp` A string. By default, the regex is tested against the `content` property of the context. However, if you wish to have it test any other property on the context object, without having to implement the `test` property on the rule, you can specify this property and it will be tested on that property if it exists in the context.\n**This property can also be set on a rule set, or on the instance itself**. If a property is specified on the rule that doesn't exist on the context, it will check the rule set for a `testProp`, and if one is not set (or doesn't exist on the context), it will lastly look on the instance.\n\nAny other properties, methods, objects, etc can be defined on the rule object, so you don't have to cram all of the logic only in the above functions.\n\nIt is recommended that for methods, to prefix the names with `_` and for properties to make the names as all uppercase (as object constants). This limits the possibility that in the future another name could be added that might conflict, but this is only a recommendation.\n\n## License\n\nMIT © [Nate Cavanaugh](http://alterform.com)\n\n[npm-image]: https://img.shields.io/npm/v/roolz.svg?style=flat-square\n[npm-url]: https://npmjs.org/package/roolz\n[travis-image]: https://img.shields.io/travis/natecavanaugh/roolz/master.svg?style=flat-square\n[travis-url]: https://travis-ci.org/natecavanaugh/roolz\n[coveralls-image]: https://img.shields.io/coveralls/natecavanaugh/roolz/master.svg?style=flat-square\n[coveralls-url]: https://coveralls.io/r/natecavanaugh/roolz?branch=master","maintainers":[{"name":"natecavanaugh","email":"nate@shift22.com"}],"time":{"modified":"2015-08-28T16:53:45.745Z","created":"2015-08-24T18:47:36.250Z","0.0.1":"2015-08-24T18:47:36.250Z","1.0.0":"2015-08-26T23:35:13.495Z","1.0.2":"2015-08-28T16:53:45.745Z"},"homepage":"https://github.com/natecavanaugh/roolz#readme","keywords":[],"repository":{"type":"git","url":"git+https://github.com/natecavanaugh/roolz.git"},"author":{"name":"Nate Cavanaugh","email":"nate@shift22.com","url":"alterform.com"},"bugs":{"url":"https://github.com/natecavanaugh/roolz/issues"},"license":"MIT","readmeFilename":"README.md","_attachments":{},"_etag":"\"4CPTT054YJJK5PICK4HOHPQZL\""}